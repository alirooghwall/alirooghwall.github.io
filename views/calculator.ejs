<!DOCTYPE HTML>
<html>
	<head>
		<title>Commission Calculator | MARS EMPIRE</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<style>
			body { background: #f4f4f4; color: #333; }
			main { background: #fff; margin: 2rem auto; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 800px; }
			h1 { color: #2a2a3e; text-align: center; }
			form { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 2rem; }
			label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
			input, select { width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; }
			button { grid-column: span 2; padding: 0.75rem; background: #4ecdc4; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 1rem; }
			button:hover { background: #45b7aa; }
			.result { background: #f9f9f9; padding: 1rem; border-radius: 4px; margin-top: 1rem; }
			.result h3 { color: #4ecdc4; }
		</style>
	</head>
	<body class="is-preload">
		<div id="wrapper" class="fade-in">
			<header id="header">
				<a href="/" class="logo">MARS EMPIRE</a>
				<nav>
					<a href="#menu">Menu</a>
				</nav>
			</header>
			<nav id="menu">
				<ul class="links">
					<li><a href="/">Home</a></li>
					<li><a href="/dashboard">Dashboard</a></li>
					<li><a href="/rules">Rules</a></li>
					<li><a href="/articles">Articles</a></li>
					<li><a href="/resources">Resources</a></li>
					<li><a href="/checklists">Checklists</a></li>
					<li><a href="/tree">Tree</a></li>
					<li class="active"><a href="/calculator">Calculator</a></li>
					<li><a href="/leaderboard">Leaderboard</a></li>
					<% if (user.accountType === 'admin' || user.accountType === 'master_admin') { %>
					<li><a href="/admin">Admin</a></li>
					<% } %>
				</ul>
				<ul class="actions stacked">
					<li><a href="/profile" class="button primary fit">Profile</a></li>
					<li><button onclick="logout()" class="button fit">Logout</button></li>
				</ul>
			</nav>
			<div style="text-align: center; margin: 1rem;"><button onclick="history.back()" class="button">‚Üê Back</button></div>
			<div id="main">
				<article class="post featured">
					<header class="major">
						<h1>Commission Calculator</h1>
						<p>Estimate your potential earnings based on your level and team performance.</p>
					</header>
					<form id="calcForm">
						<div>
							<label for="level">Your MLM Level</label>
							<select id="level" required>
								<option value="beginner">Beginner</option>
								<option value="intermediate">Intermediate</option>
								<option value="advanced">Advanced</option>
								<option value="expert">Expert</option>
							</select>
						</div>
						<div>
							<label for="recruits">Number of Direct Recruits</label>
							<input type="number" id="recruits" min="0" value="0" required />
						</div>
						<div>
							<label for="teamSales">Team Sales Volume ($)</label>
							<input type="number" id="teamSales" min="0" value="0" required />
						</div>
						<div>
							<label for="personalSales">Personal Sales Volume ($)</label>
							<input type="number" id="personalSales" min="0" value="0" required />
						</div>
						<button type="submit">Calculate</button>
					</form>
					<div class="result" id="result" style="display: none;">
						<h3>Estimated Commission</h3>
						<p id="commission">$0.00</p>
						<p id="breakdown"></p>
					</div>
				</article>
			</div>
			<%- include('footer') %>
		</div>
		<script>
			document.getElementById('calcForm').addEventListener('submit', function(e) {
				e.preventDefault();
				const level = document.getElementById('level').value;
				const recruits = parseInt(document.getElementById('recruits').value);
				const teamSales = parseFloat(document.getElementById('teamSales').value);
				const personalSales = parseFloat(document.getElementById('personalSales').value);

				let rate = 0;
				switch(level) {
					case 'beginner': rate = 0.05; break;
					case 'intermediate': rate = 0.10; break;
					case 'advanced': rate = 0.15; break;
					case 'expert': rate = 0.20; break;
				}

				const commission = (personalSales + teamSales) * rate + recruits * 10; // Example calculation
				document.getElementById('commission').textContent = '$' + commission.toFixed(2);
				document.getElementById('breakdown').textContent = `Based on ${rate * 100}% commission rate on $${(personalSales + teamSales).toFixed(2)} sales + $${recruits * 10} bonus for recruits.`;
				document.getElementById('result').style.display = 'block';
			});
			async function logout() {
				await fetch('/logout', {
					method: 'POST',
					credentials: 'include'
				});
				window.location.href = '/';
			}
		</script>
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
	</body>
</html>